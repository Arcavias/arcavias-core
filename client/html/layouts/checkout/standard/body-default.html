<?php

/**
 * @copyright Copyright (c) Metaways Infosystems GmbH, 2013
 * @license LGPLv3, http://www.arcavias.com/en/license
 */

$link = true;
$stepActive = $this->get( 'standardStepActive' );

?>
<div class="arcavias checkout-standard">
	<ol class="steps">
		<li class="step basket active"><a href="<?php echo $this->url( $this->config( 'basket-target' ), 'basket', 'index' ); ?>"><?php echo $this->translate( 'core/client/html', 'Basket' ); ?></a></li>
<?php foreach( $this->get( 'standardSteps', array() ) as $name ) :

		$class = '';
		$string = $this->translate( 'core/client/html', $name );

		if( $stepActive )
		{
			if( $name === $stepActive )
			{
				$class .= ' current';
				$link = false;
			}

			if( $link === true )
			{
				$url = $this->url( $this->config( 'checkout-target' ), 'checkout', 'index', array( 'c-step' => $name ) );
				$string = '<a href="' . $url . '">' . $string . '</a>';
				$class .= ' active';
			}
		}
?>
		<li class="step <?php echo $name . $class; ?>"><?php echo $string; ?></li>
<?php endforeach; ?>
	</ol>
<?php if( ( $errors = $this->get( 'standardErrorList', array() ) ) !== array() ) : ?>
	<ul class="error-list">
<?php foreach( $errors as $error ) : ?>
		<li><?php echo $error; ?></li>
<?php endforeach; ?>
	</ul>
<?php endif; ?>
<?php echo $this->get( 'standardBody' ); ?>
</div>
