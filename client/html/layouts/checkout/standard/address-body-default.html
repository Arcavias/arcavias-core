<?php

/**
 * @copyright Copyright (c) Metaways Infosystems GmbH, 2013
 * @license LGPLv3, http://www.arcavias.com/en/license
 */


$activeStep = $this->get( 'standardStepActive' );
$steps = $this->get( 'standardSteps', array() );
$step = null;

do {
	$lastStep = $step;
} while( ( $step = array_shift( $steps ) ) !== null && $step !== $activeStep );
$nextStep = ( ( $step = array_shift( $steps ) ) !== null ? $step : null );

if( $lastStep ) {
	$urlBack = $this->url( $this->config( 'checkout-target' ), 'checkout', 'index', array( 'c-step' => $lastStep ) );
} else {
	$urlBack = $this->url( $this->config( 'basket-target' ), 'basket', 'index' );
}

?>
<div class="checkout-standard-address">
	<h1><?php echo $this->translate( 'core/client/html', 'address' ); ?></h1>
	<p class="note"><?php echo $this->translate( 'core/client/html', 'Fields with an * are mandatory' ); ?></p>
	<form method="POST" action="<?php echo $this->url( $this->config( 'checkout-target' ), 'checkout', 'index', array( 'c-step' => $nextStep ) ); ?>">
<?php echo $this->get( 'addressBody' ); ?>
		<div class="button-group">
			<a class="standardbutton" href="<?php echo $urlBack; ?>"><?php echo $this->translate( 'core/client/html', 'Back' ); ?></a> 
			<button class="standardbutton"><?php echo $this->translate( 'core/client/html', 'Next' ); ?></button>
		</div>
	</form>
</div>
