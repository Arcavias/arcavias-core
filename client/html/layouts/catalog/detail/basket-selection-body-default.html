<?php

/**
 * @copyright Copyright (c) Metaways Infosystems GmbH, 2013
 * @license LGPLv3, http://www.arcavias.com/en/license
 */

$enc = $this->encoder();

$attributes = $this->get( 'selectionAttributeItems', array() );

?>
<div class="catalog-detail-basket-selection">
	<table>
		<tbody>
<?php foreach( $this->get( 'selectionAttributeMap', array() ) as $code => $list ) : ?>
			<tr>
				<td><?php echo $enc->html( $this->translate( 'client/html/code', $code ) ); ?></td>
				<td>
					<select name="<?php echo $enc->attr( $this->formparam( array( 'b-prod', 0, 'attrvar-id', $code ) ) ); ?>">
						<option value=""><?php echo $enc->attr( $this->translate( 'client/html', 'Please select' ) ); ?></option>
<?php	foreach( $list as $id => $value ) : ?>
<?php		if( isset( $attributes[$id] ) ) : ?>
						<option value="<?php echo $enc->attr( $id ); ?>"><?php echo $enc->html( $attributes[$id]->getName() ); ?></option>
<?php		endif; ?>
<?php	endforeach; ?>
					</select>
				</td>
			</tr>
<?php endforeach; ?>
		</tbody>
	</table>
<?php echo $this->get( 'selectionBody' ); ?>
</div>
