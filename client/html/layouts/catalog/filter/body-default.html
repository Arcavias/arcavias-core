<?php

/**
 * @copyright Copyright (c) Metaways Infosystems GmbH, 2012
 * @license LGPLv3, http://www.arcavias.com/en/license
 * @version $Id: body-default.html 1348 2012-10-27 12:49:19Z nsendetzky $
 */

$listTarget = $this->config( 'client/html/catalog/list/url/target' );
$listController = $this->config( 'client/html/catalog/list/url/controller', 'catalog' );
$listAction = $this->config( 'client/html/catalog/list/url/action', 'list' );

$enc = $this->encoder();
$params = array();

if( ( $catid = $this->param( 'f-catalog-id' ) ) !== null ) {
	$params['f-catalog-id'] = $catid;
}

if( ( $name = $this->param( 'a-name' ) ) !== null ) {
	$params['a-name'] = $name;
}

?>
<section class="arcavias catalog-filter">
<?php if( isset( $this->filterErrorList ) ) : ?>
	<ul class="error-list">
<?php foreach( (array) $this->filterErrorList as $errmsg ) : ?>
		<li class="error-item"><?php echo $enc->html( $errmsg ); ?></li>
<?php endforeach; ?>
	</ul>
<?php endif; ?>
	<nav>
		<form method="GET" action="<?php echo $enc->attr( $this->url( $listTarget, $listController, $listAction, $params ) ); ?>">
<?php echo $this->get( 'filterBody' ); ?>
<?php if( $this->config( 'client/html/catalog/filter/default/button', true ) ) : ?>
			<noscript>
				<button class="standardbutton" type="submit"><?php echo $enc->html( $this->translate( 'client/html', 'Show' ), $enc::TRUST ); ?></button>
			</noscript>
<?php endif; ?>
		</form>
	</nav>
</section>
